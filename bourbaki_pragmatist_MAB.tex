\documentclass[]{scrartcl}



\usepackage[english]{babel}
\usepackage{euscript}
\usepackage[utf8]{inputenc}

%spaziatura linee (opzionale)
%\linespread{1.2}


%%pacchetto per l'inclusione di figure postscript
\usepackage{graphics}
%%pacchetto per l'inclusione di figure eps
\usepackage[dvips]{graphicx}

%%comando per l'inserimento dell'intestazione
\pagestyle{headings} \makeatletter

%%pacchetto per l'inserimento di pezzi di codice
\usepackage{verbatim}


%%pacchetto per l'intestazione carina (riga sotto l'intestazione)
%\usepackage{fancyhdr}
%%\input{fancyhdr.sty}
%\pagestyle{fancy}
%\renewcommand{\chaptermark}[1]{\markboth{\thechapter.#1}{}}
%\renewcommand{\sectionmark}[1]{\markright{}}
%\lhead{} \rhead{} \chead{\emph{\leftmark}}

%%% per i diagrammi commutativi: 
\usepackage{pictexwd,dcpic}


%Ridefinizione per il quoziente!
\def\quotient#1#2{%
    \raise1ex\hbox{$#1$}\Big/\lower1ex\hbox{$#2$}%
}

%per modifica dei margini
%\addtolength{\textwidth}{1cm}
%\addtolength{\marginparsep}{2cm}

\usepackage{makeidx}
\usepackage{eurosym}
\usepackage{amsfonts}
\usepackage{latexsym}
\usepackage{makeidx}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amscd}
\usepackage{comment}
\usepackage{enumerate}
\usepackage{mathrsfs}
\usepackage[all]{xy}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

\usepackage{url}
\usepackage[colorlinks=true, a4paper=true, pdfstartview=FitV,
linkcolor=blue, citecolor=blue, urlcolor=blue]{hyperref}


\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}

%opening
\title{Bourbaki vs Pragmatism \\ A methodological comparison through the multi-armed bandits problem}
\author{Sebastiano Ferraris\footnote{sebastiano.ferraris@gmail.com}}

\begin{document}

\maketitle

% ------------------------------------------------- %
\begin{abstract}
In these pages we compare two different mathematical methodologies in approaching the well known multi-armed bandits problem: the Bourbakist and the pragmatic. The Bourbakist way is concerned with the mathematical foundation upon which a formal solution is derived in the shape of an axiomatic structure. In contrast, the pragmatist approach aims at finding the shortest path towards a solution, reducing the mathematical formalisms to the bare minimum.
The article introduces the problem, shows the two approaches and ends with a critical comparison. \\

\noindent
If you came across this article when searching for an introduction to the multi-armed bandit problem, and not a methodological comparison, you may still find what you are looking for in section~\ref{se:intro},~\ref{se:pragmatic_perspective} and in the bibliography (please do ignore completely section~\ref{se:bourbaki_perspective}). The code to create the figures and run a range of algorithms to solve the problem can be found at \href{https://github.com/SebastianoF/multi-armed-bandits-testbed}{https://github.com/SebastianoF/MAB}. 
\end{abstract}


% ------------------------------------------------- %
\section{Multi armed bandits problem}
\label{se:intro}
Consider yourself of being in the situation of having to repeatedly choose between $K$ different options, each having a cost and a possible cash reward. For each option the cost is fixed and the reward is drawn from an \emph{unknown} probability distribution, constant across time.

The problem of finding a strategy to maximise the reward is named multi armed bandits (MAB) after the situation of playing at a row of $K$ slot machines (or single armed bandit). Given an initial amount of money of $\$1000$ and a costs of $\$1$ for each draw, the player must balance an exploration phase when estimating the unknown distributions of each arm, with an exploitation phase, when the acquired knowledge is used for a gain\footnote{See Thompson~\cite{thompson1933likelihood} for an early approach where the two arms are two medical treatments, Bellman~\cite{bellman1956problem} where the problem is formulated in a Bayesian perspective for two arms, and the more recent Sutton~\cite{sutton2018reinforcement}, chapter~1, for a reinforcement learning perspective.}.

The problem can be generalised to clinical or pre-clinical trials, control engineering, mechanical and software testing, stock market investments, behavioural modelling, dynamic pricing, and many more\footnote{See Bouneffouf~\cite{bf2019survey} for a survey with a list of applications of the main algorithms solving the MAB problem.}.

% ------------------------------------------------- %
\section{The Bourbakist perspective}
\label{se:bourbaki_perspective}
Let $(\Omega, \mathcal{A})$ be a $\sigma$-algebra defined as a non-empty set $\Omega$ paired with a subset of its power set $\mathcal{A}$, containing the empty set and closed under numerable union and complement set. Let this be called \emph{action space}. Let $\mathcal{I}_{K} = \{1,2, \dots , K\} \subset \mathbb{N}$ be a set of indexes whose generic element $k$ is called \emph{arm}, by convention. Let $\mathcal{I}_{T} = \{1,2, \dots , T\} \subset \mathbb{N}$ be another set whose elements are called, again conventionally, \emph{time}. Let $\mathbb{R}_{+}$ the positive real axis including the zero. The relationship between the above defined elements are given by a function $A$ defined as:
\begin{align*}
    A : \mathcal{I}_T \times \mathcal{A} &\longrightarrow \mathcal{I}_K \\
        (t, \omega) &\longmapsto A(t, \omega) = A_t(\omega)
\end{align*}
and by a function $R$, defined as:
\begin{align*}
\mathcal{R} : \mathcal{I}_T \times \mathcal{A} &\longrightarrow \mathbb{R}_{+} \\
(t, \omega) &\longmapsto R(t, \omega) = \mathcal{R}_t(\omega)
\end{align*}
Let the former be called \emph{action} and the latter be called \emph{reward}. Let 
\begin{align*}
R : \mathcal{I}_T \times \mathcal{I}_K &\longrightarrow \mathbb{R}_{+} \\
(t, \omega) &\longmapsto R(t, k) = R_t(k)
\end{align*}
another function, defined as the only possible function making the diagram below commutative.

\[
\begindc{\commdiag}[20]

% --- nodes:

% below
\obj(0,30)[R]{$ \mathbb{R}_{+} $}

% above
\obj(0,60)[Ik]{$ \mathcal{I}_K $}
\obj(-40,60)[A]{$ \mathcal{A} $}

% --- arrrows

% ortho
\mor{Ik}{R}{$R_{t}$}
\mor{A}{Ik}{$A_t$}

%  oblique
\mor{A}{R}{$\mathcal{R}_t$}

\enddc
\]
%
for each $t \in \mathcal{I}$. Let $R_t$ be called again \emph{reward}, and the difference between $\mathcal{R}$ and $R$ will be clear from the context.\\
We observe that $\mathcal{R}$ maps the events of the $\sigma$-algebra, while $R$ maps the corresponding indexes. This is an analogous of the definition of probability respect to the one of random variable and probability density function, for when the real axis is restricted to $[0,1]\subset\mathbb{R}$.

Now consider
\begin{align*}
    \mathcal{Q} : \mathcal{I}_T \times \mathcal{A} &\longrightarrow \mathbb{R}_{+} \\
        (t, \omega) &\longmapsto \mathcal{Q}(t, \omega) = \mathcal{Q}_t(\omega)
\end{align*}
the \emph{estimated reward of the action $\omega$ up to time $t$}, for $\omega = A_t^{-1}(k)$ for a fixed $k\in \mathcal{I}_K$, with the corresponding function $Q: \mathcal{I}_T \times \mathcal{I}_K \rightarrow \mathbb{R}$. It follows that $\mathcal{Q}$ is defined as an application of the mean value in a Lebesgue space over $(\Omega, \mathcal{A})$, that is now a Borel $\sigma$-algebra\footnote{
    For a foundational perspective, see Bourbaki~\cite{bourbaki2004integration}.
} as:

\begin{align}\label{def:mathcalQt}
\mathcal{Q}_t(\omega) = \mathbb{E} \left[ R_{\tau}(k)\mid k = A_{\tau}(\omega), \forall \tau \in \mathcal{I}_t \right]
\qquad 
\omega \in \mathcal{A}
\qquad
t \in \mathcal{I}_T
\end{align}
and therefore
\begin{align}\label{def:Qt}
Q_t(k) = \mathbb{E} \left[ \mathcal{R}_{\tau}(\omega)\mid \omega = A_{\tau}^{-1}(k), \forall \tau \in \mathcal{I}_t \right]
\qquad
t \in \mathcal{I}_T
\qquad
k \in \mathcal{I}_K
\end{align}
As $\mathcal{R}$ and $R$ did, also $\mathcal{Q}$ and $Q$ satisfies the commutativity of a diagram analogous to the one shown above. The notation can be simplified for brevity\footnote{
    The simplified notation is often the only notation appearing in engineering textbooks (e.g. Sutton~\cite{sutton2018reinforcement}), although this would not allow the reader to understand the subtle formalisation of assigning to an event $\omega$ its index $k$. More tragically the simplified notation makes most of the concepts introduced so far pedantic and irrelevant.
} to:
\begin{align}\label{def:mathcalQt_simple}
Q_t(k) = \mathbb{E} \left[ R_{t}(k) \mid A_{t} = k \right]
\end{align}
where the mean value is for all the time indexes up to $t$ and where the domain values of $A_t$ is clear from the context. \\

We now define the \emph{total reward} $Q_{\infty}: \mathcal{I}_K \rightarrow \mathbb{R}$ as
\begin{align}\label{def:mathcalQinf}
Q_{\infty}(k) = \mathbb{E} \left[ \mathcal{Q}_{t}(\omega) \mid \omega = A^{-1}_{t}(k), \forall t \in \mathcal{I}_T \right]
\qquad
k \in \mathcal{I}_K 
\end{align}
or with the simplified notation as:
\begin{align}\label{def:mathcalQinf_simple}
Q_{\infty}(k) = \mathbb{E} \left[ R_{t}(k) \mid A_{t} = k \right]
\end{align}

So far we have been considering the reward and the total reward for a fixed choice of $k$. We can vary $k\in \mathcal{I}_K$ in function of the time index. So let $\mathbf{k}$ an element of
\begin{align*}
\mathcal{I}_K^T = \underbrace{\mathcal{I}_K\times \mathcal{I}_K \times \dots \times \mathcal{I}_K}_{T\text{-times}}
\end{align*}
or equivalently a function from $\mathcal{I}_T$ to $\mathcal{I}_K$. 
Definitions \ref{def:mathcalQt} and \ref{def:mathcalQt_simple} are so generalised to $Q_t:\mathcal{I}_K^T \rightarrow \mathbb{R}$ for $t\in\mathcal{I}_{\leq T}$, having defined $\mathcal{I}_{\leq T}$ any interval of positive integers between $1$ and $T$, and
\begin{align*}
Q_t(\mathbf{k}) = \mathbb{E} \left[ \mathcal{R}_{\tau}(\omega)
\mid
\omega = A^{-1}_{\tau}(\mathbf{k}_{\tau}), \forall \tau \in \mathcal{I}_t \right]
\qquad 
\mathbf{k} \in \mathcal{I}_K^T
\qquad
t \in \mathcal{I}_T
\end{align*}
and therefore 
\begin{align*}
Q_{\infty}(\mathbf{k}) = \mathbb{E} \left[ \mathcal{R}_{t}(\omega)
\mid
\omega = A^{-1}_{t}(\mathbf{k}_{t}),  \forall t \in \mathcal{I}_T \right]
\qquad 
\mathbf{k} \in \mathcal{I}_K^T
\end{align*}
The mean value computed with a Lebesgue measure, over the Borel space generated as the sets of images 
\footnote{
    We consider the definition under the accordance with the axiom of choice as in the ZFC axiomatic set theory, in order to avoid \emph{virages dangereux}. See also Bourbaki~\cite{bourbaki2004theory} and \cite{takeuti1982classes}.
} $\mathcal{R}_t(\omega)$ for all $\omega \in \mathcal{A}$ can be reformulated as:
\begin{align*}
Q_t(\mathbf{k}) 
= 
\frac
{\sum_{\tau=1}^{t} R_{\tau}(\mathbf{k}_{\tau}) \mathbf{1}_{A_\tau = \mathbf{k}_{\tau}}}
{\sum_{\tau=1}^{t} \mathbf{1}_{A_\tau = \mathbf{k}_{\tau}}}
\end{align*}
where $\mathbf{1}_{A_\tau = \mathbf{k}_{\tau}}$ equals to $1$ for when the event $\omega$ corresponding to $\mathbf{k}_{\tau}$ is mapped exactly to $\mathbf{k}_{\tau}$ through $A_t$, and $0$ for any other event.
Extending the time indexes up to infinity, and to justify the notation introduced above, where we used $\infty$ for a finite case, we have the following theorem:
\begin{theorem}\label{th:bourbaki}
Given a ring of infinite cardinality to which the time index $t$ belongs, and an Hilbert module\footnote{An algebraic structure generalising Hilbert vector spaces over the now introduced ring of time indexes. See for example \cite{bourbaki1987topological}.} to which the vector $\mathbf{k}$ belongs, it follows that
\begin{align*}
Q_{\infty}(\mathbf{k}) = \lim_{T \rightarrow \infty} Q_{T}(\mathbf{k})
\end{align*}
\end{theorem}
\begin{proof}
    Direct consequence of the definition of $Q_{\infty}$ generalised to the theorem hypothesis' extended structures.
\end{proof}

We now consider the value $\hat{k}$ that satisfies
\begin{align*}
\hat{k} = \argmax_{k \in \mathcal{I}_K} Q_t(k)
\qquad
\forall t \in \mathcal{I}_T
\end{align*}
for a constant value for each time index, as in the definition of $Q_t$ given in~\ref{def:Qt}. 
If we consider the possibility of varying the chosen arm $k$ across time, and so if we are allowed to compare different images of the function $A_t$ then $\hat{\mathbf{k}}$ is defined as
\begin{align}\label{eq:bourbaki_solution}
\hat{\mathbf{k}} 
= 
\argmax_{\mathbf{k} \in \mathcal{I}_K^{T}} Q_t(\mathbf{k})
\qquad
\forall t \in \mathcal{I}_T
\end{align}
Under the light of theorem~\ref{th:bourbaki}, and with the given definitions, we can now call the defined vector $\hat{\mathbf{k}}$ the \emph{solution of the generalised multi-armed bandits problem}.

% ------------------------------------------------- %
\section{The pragmatic perspective}
\label{se:pragmatic_perspective}


% ------------------------------------------------- %
\section{Discussion}
\label{se:outro}
In this article, we considered the example of the multi-armed bandit problem to prove a point: mathematics had been ruined by mathematicians. 

Even if formally correct (excluding typos) and coherent (excluding Goedel\footnote{
    To this regard, in the article \emph{the ignorance of Bourbaki}~\cite{mathias1992ignorance}, Mathias noticed that the attempt of grounding the whole corpus of mathematics in an axiomatic sense have happened after, and in a conscious effort of ignoring the Goedel incompleteness theorems.
}), the Bourbakist explanation of the multi-armed bandits proposed in section~\ref{se:bourbaki_perspective} is no more than a waste of space, turning a relatively simple problem into a maze of complications.

The pragmatic approach show that there is no need of taking a functional perspective and to link it to several mechánemas developed in entirely different contexts. These are not just irrelevant in reaching a solution, they are also suffocating any possible creativity in facing a slightly different problem. We can challenge the reader to continue the formalisation, for the case where the unknown distributions are not fixed over time, to see how many pages of useless formalism this would take. We also challenge the reader to implement the code to solve the problem from the functional and algebraic definitions rather than from the matrix definition. None of the given definitions had provided any hints to solve the problem numerically, and, in conformity with the strict Bourbaki style, no numerical examples had been provided. 

\subsection*{Other examples}

Despite many, and all of them more entitled than me, have express their negative view about the Bourbakist's mathematics\footnote{
    Amongst the many: Arnold~\cite{arnol1998teaching}, De Finetti~\cite{de2008bruno}, Lockhart~\cite{lockhart2009mathematician}, the already cited Mathias and its follow up~\cite{mathias1998further}, Velupillai~\cite{velupillai2012bourbaki}
}, this approach is still widespread if not predominant across the mathematical community. 
There are numerous examples of practical problems, whose pragmatical approach had been ruined by an overformalisation\footnote{
    Or assiomattisation, as Bruno de Finetti~\cite{de2008bruno} would have said playing on the Italian word \emph{matti}, meaning crazy.
} similar to the short one here proposed. They are useful examples, in particular to anyone may think that I had been overzealous in writing section~\ref{se:bourbaki_perspective}, to give on purpose a negative light to the method.

The most notable is the optimal transport (OT) theory. From being a pragmatic methodology of solving a class of optimisation problem, it had become a 500 pages book underpinned by a great amount of measure theory and Lebesgue spaces, perfectly irrelevant to solve any instance of an optimal transport problem. Comparing one of the original optimal transport theory presentation by Hitchcock~\cite{hitchcock1941distribution} and the formalised one by Villani~\cite{villani2003topics} is possible to see the extent of the damage. The first one is easy to read, understand, implement and possibly extend in several directions by anyone having an highschool mathematical education. The second one is a seemingly uncreated maze of unassailable interlinked concepts, requiring few years of academic studies only to grasp the first few pages. It is almost impossible to be extended in any direction that a slightly different initial problem arising from practical need may pose, and it leaves no clarification whatsoever about why this perspective should be preferred upon the one proposed 60 years before. %Not surprisingly, a recent evolution of the OT by Patel~\cite{patelalternate} is rooted in the pragmatic approach, and does not even cite the Villani formalisation.

Another notable example of office complication otherwise simple things in action, is in the domain of medical image registration. Here the aim is to solve the problem of finding the non-rigid deformation or metamorphosis between anatomies. The problem originates from the studies of shapes growth by D'Arcy Thompson~\cite{d1942growth} and pragmatically extended amongst others in Modersitzki~\cite{modersitzki2004numerical}. The Bourbaki over-formalized branch can be found in works like~\cite{younes2010shapes}, where we have to wait for 12 chapters before seeing what had motivated the formal mathematical theory developed until there. 
In this case too, there is no explanation of what are the advantages of the axiomatic approach respect to the pragmatic one, that have appeared before.

The reader may say, for this specific case, that the pragmatic approach \cite{modersitzki2004numerical} does not use neither diffeomorphisms nor reproducing Kernel Hilbert spaces. And this is true, although it is not proved that these two mathematical devices can provide more accurate results than their pragmatic counterparts when implemented in practice. Instead it is true that they are computationally slower when implemented in practice.

There are other branches of mathematics, such as algebraic topology, fuzzy logic and topological data analysis, whose detachment from the practical set of problems that had them originated, had turned them into axiomatic mazes, used by students to unlearn how to solve problems without overthinking and how to refrain from getting lost in useless details. Here for the sake of brevity, and for having already closed a wide enough range of academic doors, I would rather omit the details.

\subsection*{Why is Bourbaki still around?}

There is no clear separation between the pragmatic and the Bourbaki approach in the general case, or not as much as in the examples here presented. Although what arises from a qualitative empirical evaluation is that the over-axiomatic version of a theory is a range of negative sides.

The Bourbaki formalisation is not remotely straightforward to implement in modern programming language. It has an exhaustive cognitive load, which makes it more difficult to generalise for simple changes in the initial problem setting. It does not provide any additional insight and intuition over the problem that originated the theory. The reader get used to get lost in useless details and pedantic discussions about notations.

If all so negative, then why the Bourbaki approach is still around? What are we missing? The truth is, the Bourbaki approach is highly valued, prized, and appreciated\footnote{
    To this regard, the readers are welcome to copy-paste section~\ref{se:bourbaki_perspective} and to extend it, in the Bourbakist style, into an article whose title could be something like \emph{The multi-armed bandits for the working mathematician}, to experiment the level of appraisal it would receive from any mathematician they can find.
}.

% untangle list below here

The above mentioned Villani is a prominent figure in the mathematical community, who will remain in the history books of his field. He is the recipient of the Fields Medal for mathematics, awarded after his over-axiomatisation of theories developed before him by mathematicians chasing practical problems outside academia. 

Amongst the several positive sides contributing to the survival of bourbakisms, one may count: 
\begin{enumerate}
    \item It makes the outcomes inaccessible to neophytes.
    \item It allows the existence of professors of mathematics who can not code or have any ability to solve any problem in practice.
    \item It is good for the ego.
    \item It detaches completely mathematics from reality, so it makes impossible to have any objective measurement of the quality or value of the work produced.
    \item It prevents pitiful counterexamples.
\end{enumerate}
The reason why the first two are positive attributes, is that neophytes usually are the people who have to decide where the public money goes, and professors the ones who receives them.
As for the ego, the pleasure of having pages an elegant notebook somewhere filled with mathematical formulae written with a well thought after handwriting is unique. Unfortunately, we can assure after empirical evidence that this very same pleasure is a great obstacle to mathematical knowledge, or any kind of knowledge, making the notebook owner bend the problem to its solution rather than the the solution to the problem.

Although Bourbaki is the current trend, and the pure thought advocates have even arrived at accusing the mathematics that has anything to do with reality of being source of mistakes\footnote{
    Gros~\cite{gros2019masters} had found how even professional mathematicians can be mislead by reality. They had leveraged on this most surprising fact, for advocating to increase the detachment. After concluding that \lq\lq [...] we can't reason in a totally abstract manner\rq\rq, instead of suggesting to take into account the reality in the mathematical practice they suggested a move towards the opposite direction: \lq\lq We have to detach ourselves from our non-mathematical intuition\rq\rq.
}, it is not difficult to convince oneself that the reality is adamant to persist in being what it is. To this regard it is difficult to imagine that anyone would praise for medicine and engineering to be detached from reality, and yet it seems mathematics, only since after Bourbaki must be treated as something different.
 


Some may object that the last point is a valid one also from a pragmatic point of view, as the need to avoid paradoxes and counterexamples is a very practical one. This is again true. The concerns of mathematics with counterexample have led to innumerable discoveries, from Galois theory, to Fractals, and the search for counterexample is a valuable tool to have a better understanding when exploring the limits of mathematical knowledge\footnote{
    For example Procesi~\cite{procesi1977elementi}, Mandelbrot~\cite{mandelbrot1983fractal} and Gelbaum~\cite{gelbaum2003counterexamples}.
}. Although, the problem of the Bourbaki approach is the over-concern with counterexample originating from theoretical considerations not related to the chased problem. This ca can be distracting and can considerably increase the cognitive load for no valid reason. In section~\ref{se:bourbaki_perspective} we attained an algorithm that solves the problem, having never faced pathological counterexamples despite not relying on $\sigma$-algebras, Borel spaces, Lebesgue measures or even without explicit use of functions. What we came across were only some practical malices that are never learned by whoever is limiting themselves to the Bourbaki presentation of the problem.

We go even further citing a case where the overconcern with counterexamples mislead the researchers:
the medical imaging paper by Lorenzi~\cite{lorenzi2013geodesics} claims that there is no bijective correspondence between the space of the tangent vector fields and the one of their integral curves. This claim is made after citing a very peculiar counterexample found by Milnor on the tangent space of the circle.
Interestingly enough the conditions for the counterexample to happen are never met in the application concerning the paper. In the simpler considered case of $\mathbb{R}^3$, the tangent space is $\mathbb{R}^3$ itself and the bijective correspondence is guaranteed by the basic Picard-Lindeloff theorem.




% ------------------------------------------------- %
\section{Conclusion}

The comparison proposed in this paper aims at showing how important is the mathematical approach in achieving a solution of a problem and how the over-formalisation can lead to an inextricable forest of definitions whose few pathways between branches leads away instead of closer to a solution of the given problem.  
With the pragmatic perspective upon the multi-armed bandits presented in section~\ref{se:pragmatic_perspective}, where the problem is quickly given by a matrix in which only one value can be discovered for each column,an algorithm can be quickly implemented and tested without even refer to Borel or Lebesgue.

We also challenged the usefulness of the Bourbaki approach outside academia, as a potentially inducing a negative vision upon mathematics, that is so transformed in a series of useless definitions and theorems, referring to generalisation that are not useful and counterexamples that do not arise in practice. 

In general the aim of mathematical practice, the one that was not ruined by mathematicians, is to find the algorithm that better solves a given problem. Despite students will be oblige to learn the Bourbaki method to get a degree and to unlearn it as quick as possible to be of any use in the industry, through an example, this paper advocates for not considering the Bourbaki method as what mathematics is about.

\bibliography{biblio} 
\bibliographystyle{alpha}


\end{document}
